(library
 (name
  ; enable release renaming
  ocamlformat_parser_extended_devversion
  ; disable release renaming
  )
 (public_name
  ; enable release renaming
  ocamlformat-lib-devversion.parser_extended
  ; enable release renaming
  )
 (flags
  (:standard
   -w
   -9
   -open
   ; enable release renaming
   Ocamlformat_parser_shims_devversion
   -open
   Ocamlformat_ocaml_common_devversion
   ; disable release renaming
   ))
 (libraries
  compiler-libs.common
  menhirLib
  ; enable release renaming
  ocamlformat_parser_shims_devversion
  ocamlformat_ocaml_common_devversion
  ; disable release renaming
  ))

(ocamllex lexer)

(menhir
 (infer false)
 (flags
  :standard
  --lalr
  --strict
  --unused-token
  COMMENT
  --unused-token
  DOCSTRING
  --unused-token
  EOL
  --unused-token
  GREATERRBRACKET
  --fixed-exception
  --table
  --strategy
  simplified)
 (modules parser))

(rule
 (targets asttypes.ml)
 (mode fallback)
 (action
  (copy# asttypes.mli %{targets})))

(rule
 (targets parsetree.ml)
 (mode fallback)
 (action
  (copy# parsetree.mli %{targets})))
